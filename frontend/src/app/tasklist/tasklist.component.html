<div class="flex h-screen bg-gray-900 text-white">
<!-- Sidebar: Online Users -->
<div class="w-64 bg-gray-800 p-4 border-r border-gray-700">
<h3 class="text-lg font-bold mb-4">Online Users</h3>
<ul>
<li
*ngFor="let user of users"
class="p-2 rounded-lg hover:bg-gray-700 flex items-center space-x-3"
>
<div class="w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center font-semibold">{{ user[0] }}</div>
<div class="text-sm">{{ user }}</div>
</li>
</ul>
</div>


<!-- Main Tasks Area -->
<div class="flex-1 flex flex-col">


<!-- Header / Controls -->
<div class="p-4 border-b border-gray-700 flex items-center justify-between">
<div class="flex items-center space-x-3">
<h2 class="text-2xl font-bold">Tasks</h2>
<span class="text-sm text-gray-400">{{ filteredTasks.length }} tasks</span>
</div>


<div class="flex items-center space-x-2">
<input
[(ngModel)]="search"
placeholder="Search tasks..."
class="p-2 rounded bg-gray-700 text-white outline-none w-56"
/>


<select [(ngModel)]="filterStatus" class="p-2 rounded bg-gray-700">
<option value="">All</option>
<option value="todo">To do</option>
<option value="in-progress">In progress</option>
<option value="done">Done</option>
</select>


<button (click)="openAdd()" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg font-semibold">Add Task</button>
<button class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg font-semibold" [routerLink]="['/chat']">Back to chat</button>
</div>
</div>


<!-- Task list -->
<div class="flex-1 p-4 overflow-y-auto space-y-3">
<div *ngFor="let task of filteredTasks" class="p-4 bg-gray-800 rounded-lg border border-gray-700 flex justify-between items-start">
<div class="flex-1">
<div class="flex items-center justify-between">
<div>
<h3 class="text-lg font-semibold">{{ task.name }}</h3>
<p class="text-sm text-gray-400 mt-1">{{ task.description }}</p>
</div>


<div class="ml-4">
<span [ngClass]="statusBadgeClass(task.status)" class="px-3 py-1 rounded-full text-sm font-semibold">{{ statusText(task.status) }}</span>
</div>
</div>


<div class="mt-3 flex items-center space-x-3">
<div class="text-sm text-gray-400">Assigned to:</div>
<div class="flex items-center space-x-2">
<div class="w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center">{{ task.assignedTo ? task.assignedTo[0] : '?' }}</div>
<div class="text-sm">{{ task.assignedTo || 'Unassigned' }}</div>
</div>
</div>
</div>


<div class="ml-4 flex flex-col space-y-2">
<button (click)="toggleStatus(task)" class="bg-green-600 hover:bg-green-700 px-3 py-1 rounded-lg text-sm font-semibold">Toggle</button>
<button (click)="editTask(task)" class="bg-yellow-500 hover:bg-yellow-600 px-3 py-1 rounded-lg text-sm font-semibold">Edit</button>
<button (click)="deleteTask(task)" class="bg-red-600 hover:bg-red-700 px-3 py-1 rounded-lg text-sm font-semibold">Delete</button>
</div>
</div>


<div *ngIf="filteredTasks.length === 0" class="text-center text-gray-400 mt-8">No tasks match your filters.</div>
</div>


<!-- Add / Edit drawer -->
<div *ngIf="isDrawerOpen" class="p-4 bg-gray-800 border-t border-gray-700">
<div class="grid grid-cols-1 md:grid-cols-3 gap-3">
<input [(ngModel)]="form.name" placeholder="Task name" class="col-span-2 p-3 rounded bg-gray-700" />


<select [(ngModel)]="form.status" class="p-3 rounded bg-gray-700">
<option value="todo">To do</option>
<option value="in-progress">In progress</option>
<option value="done">Done</option>
</select>


<textarea [(ngModel)]="form.description" placeholder="Description" class="col-span-3 p-3 rounded bg-gray-700"></textarea>


<input [(ngModel)]="form.assignedTo" placeholder="Assign to (name)" class="col-span-2 p-3 rounded bg-gray-700" />


<div class="col-span-3 flex items-center space-x-2">
<button (click)="save()" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg font-semibold">Save</button>
<button (click)="closeDrawer()" class="bg-gray-600 hover:bg-gray-500 px-4 py-2 rounded-lg font-semibold">Cancel</button>
</div>
</div>
</div>


</div>
</div>